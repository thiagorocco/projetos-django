{% extends 'financeiro/base.html' %}
{% load static %}
{% block titulo %}Relatório de Orçamentos{% endblock %}
{% block content %}
<br><br>
    <h2>Relatório de Orçamentos</h2>
    <form action="{% url 'rel_orcamentos' %}">
        Data Inicial: <input type="date" name="data-inicio" value="{% if request.GET.get('data-inicio') %}{{ request.GET.get('data-inicio')}}{% endif%}" required >
        Data Final: <input type="date" name="data-fim" required >
        Categoria: 
        <select name="categoria">
                <option value="-1">*** Todas ***</option>
            {% for categoria in categorias %}
                <option value="{{ categoria.id }}">{{ categoria.nome }}</option>
            {% endfor %}        
        </select>
        <input type="submit" value="Filtrar">
    </form>
    <table>
        <thead>
            <tr>
            <th>Data</th>
            <th>Categoria</th>
            <th>Valor</th>
            <th colspan="2">AÇÃO</th>
        </tr>
    </thead>
    {% if imprimir %}
        {% for orcamento in orcamentos %}
            <tr>
                <td>{{ orcamento.data|date:"d/m/Y" }}</td>
                <td>{{ orcamento.nome_categoria }}</td>
                <td>R$ {{ orcamento.valor }}</td>
                <td><a href="/update_get_orcamento/{{orcamento.id}}">Editar</a> | <a href="/delete_orcamento/{{orcamento.id}}">Excluir</a></td>
            </tr>
        {% endfor %}
    {% else %}
            <tr>
                <td colspan="4">-----------------------------------------</td>
            </tr>
            <tr>
                <td colspan="4">Informe os filtros para gerar o relatório</td>
            </tr>
            <tr>
                <td colspan="4">-----------------------------------------</td>
            </tr>
    {% endif %}
    </table>
    {% if messages %}
    {% for message in messages %}
        <p 
            {% if message.tags %} 
                class="msg-{{ message.tags }}" 
            {% endif %}>
            {{ message }}
        </p>
    {% endfor %}
{% endif %}
{% endblock %}